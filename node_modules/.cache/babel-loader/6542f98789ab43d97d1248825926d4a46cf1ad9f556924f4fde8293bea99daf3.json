{"ast":null,"code":"import API from '../../API';\nimport { addFavouritesAction, deleteFavouritesAction, fetchFavouritesAction } from './action';\nconst api = new API();\nconst FAVOURITES_KEY = 'FAVOURITES_KEY';\nexport const fetchFromLocalStorage = () => {\n  return async dispatch => {\n    let favouritesJSON = localStorage.getItem(FAVOURITES_KEY);\n    let favourites = [];\n    if (favouritesJSON) {\n      favourites = JSON.parse(favouritesJSON);\n    }\n    dispatch(fetchFavouritesAction(favourites));\n  };\n};\nexport const addFavourite = image => {\n  return async (dispatch, getState) => {\n    let prevFavourites = getState().favourites.list;\n    const nextFavourites = [image, ...prevFavourites];\n    setToLocalStorage(nextFavourites);\n    dispatch(addFavouritesAction(nextFavourites));\n  };\n};\nexport const deleteFavourite = id => {\n  return async (dispatch, getState) => {\n    let prevFavourites = getState().favourites.list;\n    const nextFavourites = prevFavourites.filter(image => image.id != id);\n    setToLocalStorage(nextFavourites);\n    dispatch(deleteFavouritesAction(nextFavourites));\n  };\n};\nconst setToLocalStorage = favourites => {\n  localStorage.setItem(FAVOURITES_KEY, JSON.stringify(favourites));\n};","map":{"version":3,"names":["API","addFavouritesAction","deleteFavouritesAction","fetchFavouritesAction","api","FAVOURITES_KEY","fetchFromLocalStorage","dispatch","favouritesJSON","localStorage","getItem","favourites","JSON","parse","addFavourite","image","getState","prevFavourites","list","nextFavourites","setToLocalStorage","deleteFavourite","id","filter","setItem","stringify"],"sources":["/Users/techi.s./techis-wd-forum-django-react/frontend/src/reducks/favourites/operations.js"],"sourcesContent":["import API from '../../API';\nimport { addFavouritesAction, deleteFavouritesAction, fetchFavouritesAction } from './action';\n\nconst api = new API();\nconst FAVOURITES_KEY = 'FAVOURITES_KEY';\n\nexport const fetchFromLocalStorage = () => {\n    return async dispatch => {\n        let favouritesJSON = localStorage.getItem(FAVOURITES_KEY);\n        let favourites = [];\n        if (favouritesJSON) {\n            favourites = JSON.parse(favouritesJSON);\n        }\n        dispatch(fetchFavouritesAction(favourites));\n    };\n};\n\nexport const addFavourite = image => {\n    return async (dispatch, getState) => {\n        let prevFavourites = getState().favourites.list;\n        const nextFavourites = [image, ...prevFavourites];\n        setToLocalStorage(nextFavourites);\n        dispatch(addFavouritesAction(nextFavourites));\n    };\n};\n\nexport const deleteFavourite = id => {\n    return async (dispatch, getState) => {\n        let prevFavourites = getState().favourites.list;\n        const nextFavourites = prevFavourites.filter(image => image.id != id);\n        setToLocalStorage(nextFavourites);\n        dispatch(deleteFavouritesAction(nextFavourites));\n    };\n};\n\nconst setToLocalStorage = favourites => {\n    localStorage.setItem(FAVOURITES_KEY, JSON.stringify(favourites));\n};\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,WAAW;AAC3B,SAASC,mBAAmB,EAAEC,sBAAsB,EAAEC,qBAAqB,QAAQ,UAAU;AAE7F,MAAMC,GAAG,GAAG,IAAIJ,GAAG,EAAE;AACrB,MAAMK,cAAc,GAAG,gBAAgB;AAEvC,OAAO,MAAMC,qBAAqB,GAAG,MAAM;EACvC,OAAO,MAAMC,QAAQ,IAAI;IACrB,IAAIC,cAAc,GAAGC,YAAY,CAACC,OAAO,CAACL,cAAc,CAAC;IACzD,IAAIM,UAAU,GAAG,EAAE;IACnB,IAAIH,cAAc,EAAE;MAChBG,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACL,cAAc,CAAC;IAC3C;IACAD,QAAQ,CAACJ,qBAAqB,CAACQ,UAAU,CAAC,CAAC;EAC/C,CAAC;AACL,CAAC;AAED,OAAO,MAAMG,YAAY,GAAGC,KAAK,IAAI;EACjC,OAAO,OAAOR,QAAQ,EAAES,QAAQ,KAAK;IACjC,IAAIC,cAAc,GAAGD,QAAQ,EAAE,CAACL,UAAU,CAACO,IAAI;IAC/C,MAAMC,cAAc,GAAG,CAACJ,KAAK,EAAE,GAAGE,cAAc,CAAC;IACjDG,iBAAiB,CAACD,cAAc,CAAC;IACjCZ,QAAQ,CAACN,mBAAmB,CAACkB,cAAc,CAAC,CAAC;EACjD,CAAC;AACL,CAAC;AAED,OAAO,MAAME,eAAe,GAAGC,EAAE,IAAI;EACjC,OAAO,OAAOf,QAAQ,EAAES,QAAQ,KAAK;IACjC,IAAIC,cAAc,GAAGD,QAAQ,EAAE,CAACL,UAAU,CAACO,IAAI;IAC/C,MAAMC,cAAc,GAAGF,cAAc,CAACM,MAAM,CAACR,KAAK,IAAIA,KAAK,CAACO,EAAE,IAAIA,EAAE,CAAC;IACrEF,iBAAiB,CAACD,cAAc,CAAC;IACjCZ,QAAQ,CAACL,sBAAsB,CAACiB,cAAc,CAAC,CAAC;EACpD,CAAC;AACL,CAAC;AAED,MAAMC,iBAAiB,GAAGT,UAAU,IAAI;EACpCF,YAAY,CAACe,OAAO,CAACnB,cAAc,EAAEO,IAAI,CAACa,SAAS,CAACd,UAAU,CAAC,CAAC;AACpE,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}